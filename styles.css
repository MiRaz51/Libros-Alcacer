:root{ --bg:#0b111b; --fg:#e7edf5; --muted:#9fb3c8; --card:#121a26; --border:#1f2a3a; --primary:#3aa9ff; --danger:#ff5d5d; --accent:#28d17c; }
*{ box-sizing: border-box; }
html,body{ height:100%; }
body{ margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: var(--bg); color: var(--fg); }
.container{ max-width: 1100px; margin: 24px auto; padding: 0 16px; }
h1{ margin: 0 0 12px; font-weight: 650; }
.stats-container{ display: flex; flex-direction: column; gap: 8px; margin-bottom: 16px; padding: 12px 16px; background: var(--card); border: 1px solid var(--border); border-radius: 8px; }
.stats-row{ display: flex; gap: 24px; padding-top: 4px; border-top: 1px solid var(--border); }
.stats-row:first-child{ padding-top: 0; border-top: none; }
.stat-item{ display: flex; gap: 8px; align-items: center; }
.stat-label{ font-size: 14px; color: var(--muted); }
.stat-value{ font-size: 18px; font-weight: 600; color: var(--fg); }
.stat-value.stat-disponible{ color: #4ade80; }
.stat-value.stat-prestado{ color: #f87171; }
.filtros-aplicados{ font-size: 13px; color: var(--muted); font-style: italic; }
.filtros-aplicados:empty{ display: none; }
.toolbar{ display: flex; gap: 8px; margin-bottom: 12px; }
.toolbar input{ flex:1; padding:8px 10px; border-radius:8px; border:1px solid var(--border); background: var(--card); color: var(--fg); }
.toolbar button{ padding:8px 12px; border-radius:8px; border:1px solid var(--border); background: var(--primary); color: #07111e; cursor:pointer; }
.toolbar button:hover{ filter: brightness(1.1); }
.toolbar .help-btn{ background: var(--accent); font-size: 18px; padding: 8px 14px; margin-left: auto; }
.card{ background: var(--card); border:1px solid var(--border); border-radius:12px; padding: 8px; }

 table{ width:100%; border-collapse: collapse; }
 thead th{ position: sticky; top:0; background: #0f1623; }
 th, td{ border-bottom:1px solid var(--border); padding: 10px; text-align:left; }
 th.sortable{ cursor: pointer; user-select: none; white-space: nowrap; }
 th.sortable:hover{ background: #1a2332; }
 tr:hover{ background: rgba(255,255,255,0.03); }
 .estado-badge{ padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 500; display: inline-block; }
 .estado-disponible{ background: #1a4d2e; color: #4ade80; border: 1px solid #22c55e; }
 .estado-prestado{ background: #4d1a1a; color: #f87171; border: 1px solid #ef4444; }
 .estado-display{ display: flex; align-items: center; }
 .dialog-footer{ display: flex; justify-content: flex-end; padding: 16px; border-top: 1px solid var(--border); }
 .btn-cerrar-footer{ padding: 10px 24px; border-radius: 8px; border: 1px solid var(--border); background: var(--accent); color: #031414; cursor: pointer; font-weight: 500; }
 .actions{ white-space: nowrap; }
 button{ padding:6px 10px; border-radius: 8px; border:1px solid var(--border); background: var(--accent); color: #031414; cursor: pointer; }
 button:disabled{ opacity: 0.5; cursor: not-allowed; }
 button.secondary{ background: #8bb3ff; }
 button.danger{ background: var(--danger); color: #240202; }
 button:focus{ outline:2px solid var(--primary); outline-offset: 2px; }

 dialog{ border:1px solid var(--border); border-radius: 12px; background: var(--card); color: var(--fg); padding: 0; max-width: 1200px; width: 95vw; }
 dialog form{ padding: 16px; }
 dialog::backdrop{ background: rgba(0,0,0,0.5); }
 .dialog-container{ display: flex; gap: 20px; align-items: stretch; }
 .dialog-container > .grid{ flex: 1; min-width: 0; }
 .portada-column{ width: 320px; flex-shrink: 0; display: flex; flex-direction: column; gap: 8px; }
 .portada-column h4{ margin: 0; font-size: 14px; font-weight: 600; color: var(--muted); }
 .portada-placeholder{ width: 100%; flex: 1; border: 1px solid var(--border); border-radius: 8px; display: flex; align-items: center; justify-content: center; background: #0a0e15; color: var(--muted); font-size: 14px; }
 .portada-column img{ width: 100%; height: 100%; object-fit: cover; border-radius: 8px; border: 1px solid var(--border); }
 .resumen-column{ width: 320px; flex-shrink: 0; display: flex; flex-direction: column; gap: 8px; }
 .resumen-column h4{ margin: 0; font-size: 14px; font-weight: 600; color: var(--muted); }
 .resumen-texto{ padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: #0a0e15; color: var(--fg); font-size: 13px; line-height: 1.6; flex: 1; overflow-y: auto; white-space: pre-wrap; }
 .resumen-texto.sin-contenido{ display: flex; align-items: center; justify-content: center; color: var(--muted); font-size: 14px; }
 label{ display:flex; flex-direction: column; gap:6px; font-size: 13px; color: var(--muted); }
 input, select, textarea{ padding:10px; border-radius: 8px; border:1px solid var(--border); background: #0f1623; color: var(--fg); font-family: inherit; }
 textarea{ resize: vertical; }
 input:disabled, select:disabled, textarea:disabled{ opacity: 0.5; cursor: wait; }
 input:read-only, textarea:read-only{ background: #0a0e15; cursor: default; }
 .grid{ display: grid; grid-template-columns: repeat(2,minmax(0,1fr)); gap: 12px; }
 .grid .full{ grid-column: 1 / -1; }
 .prestamo-row{ grid-column: 1 / -1; display: flex; gap: 12px; align-items: flex-end; }
 .prestamo-row label{ flex: 1; }
 .prestamo-row button{ flex-shrink: 0; margin-bottom: 0; }

 .help-dialog{ max-width: 900px; width: 90vw; max-height: 85vh; border: 1px solid var(--border); border-radius: 12px; background: var(--card); color: var(--fg); padding: 0; }
 .help-header{ display: flex; justify-content: space-between; align-items: center; padding: 20px 24px; border-bottom: 1px solid var(--border); background: var(--bg); }
 .help-header h2{ margin: 0; font-size: 24px; color: var(--primary); }
 .help-close{ background: transparent; border: none; color: var(--muted); font-size: 28px; cursor: pointer; padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 4px; }
 .help-close:hover{ background: var(--border); color: var(--fg); }
 .help-content{ padding: 24px; overflow-y: auto; max-height: calc(85vh - 80px); line-height: 1.7; }
 .help-content h1{ color: var(--primary); font-size: 28px; margin-top: 0; }
 .help-content h2{ color: var(--accent); font-size: 22px; margin-top: 32px; border-bottom: 1px solid var(--border); padding-bottom: 8px; }
 .help-content h3{ color: var(--fg); font-size: 18px; margin-top: 24px; }
 .help-content ul, .help-content ol{ padding-left: 24px; }
 .help-content li{ margin: 8px 0; }
 .help-content strong{ color: var(--primary); }
 .help-content code{ background: var(--bg); padding: 2px 6px; border-radius: 4px; font-family: 'Courier New', monospace; }
 .help-content pre{ background: var(--bg); padding: 12px; border-radius: 8px; overflow-x: auto; }

 .footer{ margin-top: 48px; padding: 24px 0; border-top: 1px solid var(--border); text-align: center; }
 .footer-content{ display: flex; flex-direction: column; gap: 12px; align-items: center; }
 .footer-content p{ margin: 0; font-size: 13px; color: var(--muted); }
 .footer-links{ display: flex; gap: 12px; align-items: center; font-size: 13px; }
 .footer-links a{ color: var(--primary); text-decoration: none; transition: color 0.2s; }
 .footer-links a:hover{ color: var(--accent); text-decoration: underline; }
 .footer-links .separator{ color: var(--muted); }

@media print{
  @page{ size: A4; margin: 12mm; }
  body{ background: #fff; color:#000; font-size: 10px; }
  .toolbar, dialog, button, .footer{ display: none !important; }
  .container{ max-width: none; margin: 0; padding: 0; }
  .card{ border: none; padding: 0; }
  h1{ font-size: 18px; margin-bottom: 8px; }
  .stats-container{ font-size: 10px; padding: 8px 12px; margin-bottom: 8px; }
  .stat-value{ font-size: 12px; }
  .filtros-aplicados{ font-size: 9px; }
  table{ width:100%; border-collapse: collapse; font-size: 9px; }
  thead{ display: table-header-group; }
  thead th{ background:#fff !important; color:#000 !important; font-size: 10px; font-weight: 600; }
  th, td{ border:1px solid #999; padding:4px 6px; }
  tr{ break-inside: avoid; page-break-inside: avoid; }
  tbody{ display: table-row-group; }
}
